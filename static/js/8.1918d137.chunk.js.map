{"version":3,"sources":["pages/Product/ProductDetail.js"],"names":["ProductDetail","props","useState","info","setInfo","history","useHistory","params","useParams","goNext","newIndex","slideshowIndex","cache","length","setSlideshowIndex","push","sku","goPrev","goSearchResults","lastSearchText","handleKeypress","ev","code","preventDefault","useEffect","console","log","getProductDetailResults","then","data","catch","err","warn","window","addEventListener","removeEventListener","className","onClick","products","name","src","image","alt","regularPrice","href","url","plot"],"mappings":"oLAoHeA,UA7Gf,SAAuBC,GACtB,MAAwBC,mBAAS,IAAjC,mBAAOC,EAAP,KAAaC,EAAb,KAEMC,EAAUC,cACVC,EAASC,cAcf,SAASC,IACRL,EAAQ,IACR,IAAMM,GAAYT,EAAMU,eAAiB,GAAKV,EAAMW,MAAMC,OAC1DZ,EAAMa,kBAAkBJ,GACxBL,EAAQU,KAAR,yBAA+Bd,EAAMW,MAAMF,GAAUM,MAItD,SAASC,IACRb,EAAQ,IACR,IAAMM,EAAWT,EAAMU,eAAiB,EAAI,EAAIV,EAAMW,MAAMC,OAAS,EAAIZ,EAAMU,eAAiB,EAChGV,EAAMa,kBAAkBJ,GACxBL,EAAQU,KAAR,yBAA+Bd,EAAMW,MAAMF,GAAUM,MAGtD,SAASE,IAIRb,EAAQU,KAAKd,EAAMkB,eAAN,mBAAmClB,EAAMkB,gBAAmB,KAG1E,SAASC,EAAeC,GACvB,GAAKpB,EAAMW,MAKX,OAAQS,EAAGC,MACV,IAAK,YAEJ,OADAD,EAAGE,iBACIN,IACR,IAAK,aAEJ,OADAI,EAAGE,iBACId,IACR,IAAK,SAEJ,OADAY,EAAGE,iBACIL,KASV,OA1DAM,qBAAU,WACTC,QAAQC,IAAI,WAAYnB,EAAOS,KAG/BW,YAAwBpB,EAAOS,KAC7BY,MAAK,SAACC,GAAD,OAAUzB,EAAQyB,MACvBC,OAAM,SAACC,GAAD,OAASN,QAAQO,KAAK,4BAA6BD,QACzD,CAACxB,EAAOS,MA8CXQ,qBAAU,WAET,OADAS,OAAOC,iBAAiB,UAAWd,GAC5B,kBAAMa,OAAOE,oBAAoB,UAAWf,MACjD,CAACnB,EAAMU,iBAGT,qBAAKyB,UAAU,OAAf,SACC,sBAAKA,UAAU,eAAf,UAIEnC,EAAMW,OACL,sBAAKwB,UAAU,WAAf,UACC,sBAAMA,UAAU,OAAOC,QAASpB,EAAhC,oBAGA,sBAAMmB,UAAU,OAAOC,QAAS5B,EAAhC,uBAUFN,EAAKmC,SACJ,gCACC,6BAAKnC,EAAKmC,SAAS,GAAGC,OACtB,uBAFD,IAEQ,uBAFR,IAEe,uBAFf,IAEsB,uBACrB,qBAAKH,UAAU,WAAf,SACC,qBAAKI,IAAKrC,EAAKmC,SAAS,GAAGG,MAAOJ,QAASnB,EAAiBwB,IAAKvC,EAAKmC,SAAS,GAAGC,SAEnF,sBAAKH,UAAU,YAAf,UACEjC,EAAKmC,SAAS,GAAGC,KADnB,QAC8BpC,EAAKmC,SAAS,GAAGtB,IAC7Cb,EAAKmC,SAAS,GAAGK,aAClB,mBAAGC,KAAMzC,EAAKmC,SAAS,GAAGO,MACzB1C,EAAKmC,SAAS,GAAGC,KAClB,4BAAIpC,EAAKmC,SAAS,GAAGQ,aAIvB","file":"static/js/8.1918d137.chunk.js","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\n\r\n// import named exports from our BestBuy library file\r\nimport { getProductDetailResults } from \"../../lib/bestbuy\";\r\nimport \"./Product.css\";\r\n\r\nfunction ProductDetail(props) {\r\n\tconst [info, setInfo] = useState({}); // for storing image info API response data\r\n\r\n\tconst history = useHistory();\r\n\tconst params = useParams();\r\n\r\n\tuseEffect(() => {\r\n\t\tconsole.log(\"FETCHING\", params.sku);\r\n\r\n\t\t// .then( response => response.json() )\r\n\t\tgetProductDetailResults(params.sku)\r\n\t\t\t.then((data) => setInfo(data))\r\n\t\t\t.catch((err) => console.warn(\"error making API request:\", err));\r\n\t}, [params.sku]);\r\n\t//  ðŸ‘† Because the slideshow lets us move from a details page with one ID to a details page\r\n\t//  with another ID, we have to make sure we re-fetch whenever the ID param changes\r\n\r\n\t// handler for moving to next image - used by 'prev' link and keypress handler\r\n\tfunction goNext() {\r\n\t\tsetInfo({}); // clear image and show loading message\r\n\t\tconst newIndex = (props.slideshowIndex + 1) % props.cache.length; // trick to wrap index at array upper limit\r\n\t\tprops.setSlideshowIndex(newIndex); // tell <App> new index value so slideshow remembers its place in results\r\n\t\thistory.push(`/productDetail/${props.cache[newIndex].sku}`);\r\n\t}\r\n\r\n\t// handler for moving to previous image - used by 'prev' link and keypress handler\r\n\tfunction goPrev() {\r\n\t\tsetInfo({}); // clear image and show loading message\r\n\t\tconst newIndex = props.slideshowIndex - 1 < 0 ? props.cache.length - 1 : props.slideshowIndex - 1; // wrap from 0 to end\r\n\t\tprops.setSlideshowIndex(newIndex); // tell <App> new index value so slideshow remembers its place in results\r\n\t\thistory.push(`/productDetail/${props.cache[newIndex].sku}`);\r\n\t}\r\n\r\n\tfunction goSearchResults() {\r\n\t\t// use the lastSearchText prop to return to the appropriate search results if\r\n\t\t// the prop is present (i.e. we came from results route), otherwise to\r\n\t\t// root route (i.e. we came from direct details page URL)\r\n\t\thistory.push(props.lastSearchText ? `/product/${props.lastSearchText}` : \"/\");\r\n\t}\r\n\r\n\tfunction handleKeypress(ev) {\r\n\t\tif (!props.cache) {\r\n\t\t\t// We can't do slideshow navigation if there's no cache, so return early, i.e. ignore keypress\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tswitch (ev.code) {\r\n\t\t\tcase \"ArrowLeft\":\r\n\t\t\t\tev.preventDefault(); // only preventDefault on matched keys, otherwise all other keys stop working!\r\n\t\t\t\treturn goPrev();\r\n\t\t\tcase \"ArrowRight\":\r\n\t\t\t\tev.preventDefault();\r\n\t\t\t\treturn goNext();\r\n\t\t\tcase \"Escape\":\r\n\t\t\t\tev.preventDefault();\r\n\t\t\t\treturn goSearchResults();\r\n\t\t} // switch( ev.code )\r\n\t} // handleKeypress()\r\n\r\n\tuseEffect(() => {\r\n\t\twindow.addEventListener(\"keydown\", handleKeypress);\r\n\t\treturn () => window.removeEventListener(\"keydown\", handleKeypress);\r\n\t}, [props.slideshowIndex]); // this dependency is necessary to avoid stale values of slideshowIndex in the handler\r\n\r\n\treturn (\r\n\t\t<div className=\"home\">\r\n\t\t\t<div className=\"imageDetails\">\r\n\t\t\t\t{\r\n\t\t\t\t\t// only show nav controls if the cache exists, i.e we're here via search results,\r\n\t\t\t\t\t// not via a direct link to a details page\r\n\t\t\t\t\tprops.cache && (\r\n\t\t\t\t\t\t<div className=\"controls\">\r\n\t\t\t\t\t\t\t<span className=\"prev\" onClick={goPrev}>\r\n\t\t\t\t\t\t\t\t&lt; prev\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<span className=\"next\" onClick={goNext}>\r\n\t\t\t\t\t\t\t\tnext &gt;\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\t// check if the 'product' key is set (truthy), i.e. we have the query response;\r\n\t\t\t\t\t// a safer version might be \" 'product' in info  \"   - \"in\" is the JS operator for\r\n\t\t\t\t\t// checking whether a key is defined in an object\r\n\t\t\t\t\tinfo.products ? (\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h1>{info.products[0].name}</h1>\r\n\t\t\t\t\t\t\t<br /> <br /> <br /> <br />\r\n\t\t\t\t\t\t\t<div className=\"left-col\">\r\n\t\t\t\t\t\t\t\t<img src={info.products[0].image} onClick={goSearchResults} alt={info.products[0].name} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"right-col\">\r\n\t\t\t\t\t\t\t\t{info.products[0].name} ===={info.products[0].sku}\r\n\t\t\t\t\t\t\t\t{info.products[0].regularPrice}\r\n\t\t\t\t\t\t\t\t<a href={info.products[0].url}></a>\r\n\t\t\t\t\t\t\t\t{info.products[0].name}\r\n\t\t\t\t\t\t\t\t<p>{info.products[0].plot}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<p>Loading...</p>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n} // ProductDetail()\r\n\r\nexport default ProductDetail;\r\n"],"sourceRoot":""}